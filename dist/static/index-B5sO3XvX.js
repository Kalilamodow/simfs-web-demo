var N=Object.defineProperty;var Y=(s,e,t)=>e in s?N(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var x=(s,e,t)=>(Y(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const d of n)if(d.type==="childList")for(const l of d.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(n){const d={};return n.integrity&&(d.integrity=n.integrity),n.referrerPolicy&&(d.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?d.credentials="include":n.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(n){if(n.ep)return;n.ep=!0;const d=t(n);fetch(n.href,d)}})();function Q(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var R={exports:{}};R.exports;(function(s){var e=function(){var t=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function l(o,f){if(!d[o]){d[o]={};for(var c=0;c<o.length;c++)d[o][o.charAt(c)]=c}return d[o][f]}var a={compressToBase64:function(o){if(o==null)return"";var f=a._compress(o,6,function(c){return r.charAt(c)});switch(f.length%4){default:case 0:return f;case 1:return f+"===";case 2:return f+"==";case 3:return f+"="}},decompressFromBase64:function(o){return o==null?"":o==""?null:a._decompress(o.length,32,function(f){return l(r,o.charAt(f))})},compressToUTF16:function(o){return o==null?"":a._compress(o,15,function(f){return t(f+32)})+" "},decompressFromUTF16:function(o){return o==null?"":o==""?null:a._decompress(o.length,16384,function(f){return o.charCodeAt(f)-32})},compressToUint8Array:function(o){for(var f=a.compress(o),c=new Uint8Array(f.length*2),i=0,h=f.length;i<h;i++){var g=f.charCodeAt(i);c[i*2]=g>>>8,c[i*2+1]=g%256}return c},decompressFromUint8Array:function(o){if(o==null)return a.decompress(o);for(var f=new Array(o.length/2),c=0,i=f.length;c<i;c++)f[c]=o[c*2]*256+o[c*2+1];var h=[];return f.forEach(function(g){h.push(t(g))}),a.decompress(h.join(""))},compressToEncodedURIComponent:function(o){return o==null?"":a._compress(o,6,function(f){return n.charAt(f)})},decompressFromEncodedURIComponent:function(o){return o==null?"":o==""?null:(o=o.replace(/ /g,"+"),a._decompress(o.length,32,function(f){return l(n,o.charAt(f))}))},compress:function(o){return a._compress(o,16,function(f){return t(f)})},_compress:function(o,f,c){if(o==null)return"";var i,h,g={},b={},k="",L="",v="",E=2,w=3,A=2,y=[],u=0,m=0,p;for(p=0;p<o.length;p+=1)if(k=o.charAt(p),Object.prototype.hasOwnProperty.call(g,k)||(g[k]=w++,b[k]=!0),L=v+k,Object.prototype.hasOwnProperty.call(g,L))v=L;else{if(Object.prototype.hasOwnProperty.call(b,v)){if(v.charCodeAt(0)<256){for(i=0;i<A;i++)u=u<<1,m==f-1?(m=0,y.push(c(u)),u=0):m++;for(h=v.charCodeAt(0),i=0;i<8;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1}else{for(h=1,i=0;i<A;i++)u=u<<1|h,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=0;for(h=v.charCodeAt(0),i=0;i<16;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1}E--,E==0&&(E=Math.pow(2,A),A++),delete b[v]}else for(h=g[v],i=0;i<A;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1;E--,E==0&&(E=Math.pow(2,A),A++),g[L]=w++,v=String(k)}if(v!==""){if(Object.prototype.hasOwnProperty.call(b,v)){if(v.charCodeAt(0)<256){for(i=0;i<A;i++)u=u<<1,m==f-1?(m=0,y.push(c(u)),u=0):m++;for(h=v.charCodeAt(0),i=0;i<8;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1}else{for(h=1,i=0;i<A;i++)u=u<<1|h,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=0;for(h=v.charCodeAt(0),i=0;i<16;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1}E--,E==0&&(E=Math.pow(2,A),A++),delete b[v]}else for(h=g[v],i=0;i<A;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1;E--,E==0&&(E=Math.pow(2,A),A++)}for(h=2,i=0;i<A;i++)u=u<<1|h&1,m==f-1?(m=0,y.push(c(u)),u=0):m++,h=h>>1;for(;;)if(u=u<<1,m==f-1){y.push(c(u));break}else m++;return y.join("")},decompress:function(o){return o==null?"":o==""?null:a._decompress(o.length,32768,function(f){return o.charCodeAt(f)})},_decompress:function(o,f,c){var i=[],h=4,g=4,b=3,k="",L=[],v,E,w,A,y,u,m,p={val:c(0),position:f,index:1};for(v=0;v<3;v+=1)i[v]=v;for(w=0,y=Math.pow(2,2),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;switch(w){case 0:for(w=0,y=Math.pow(2,8),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;m=t(w);break;case 1:for(w=0,y=Math.pow(2,16),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;m=t(w);break;case 2:return""}for(i[3]=m,E=m,L.push(m);;){if(p.index>o)return"";for(w=0,y=Math.pow(2,b),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;switch(m=w){case 0:for(w=0,y=Math.pow(2,8),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;i[g++]=t(w),m=g-1,h--;break;case 1:for(w=0,y=Math.pow(2,16),u=1;u!=y;)A=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=c(p.index++)),w|=(A>0?1:0)*u,u<<=1;i[g++]=t(w),m=g-1,h--;break;case 2:return L.join("")}if(h==0&&(h=Math.pow(2,b),b++),i[m])k=i[m];else if(m===g)k=E+E.charAt(0);else return null;L.push(k),i[g++]=E+k.charAt(0),h--,E=k,h==0&&(h=Math.pow(2,b),b++)}}};return a}();s!=null?s.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(R);var q=R.exports;const O=s=>Array.from(s).map(e=>String.fromCharCode(e)).join("");function P(s,e){const t=Array.from(s);t.shift();const r=t.shift(),n=O(t.splice(0,r)),d=e.createDirectory(n),l=(()=>{const a=t.shift(),o=t.shift(),f=a.toString(16)+o.toString(16);return parseInt(f,16)})();for(let a=0;a<l;a++){const o=t[a];if(o==1){const f=t[a+1],c=O(t.slice(a+2,a+2+f)),i=t[a+2+f],h=O(t.slice(a+3+f,a+3+f+i));d.createFile(c,h);const g=3+f+i;a+=g,a--}if(o==2){const f=P(new Uint8Array(t.splice(a)),d);a+=f,a--}}return l}function H(s){const t=typeof s=="string"?q.decompress(s).split(",").map(n=>parseInt(n)):s,r=new T;return P(new Uint8Array(t),r.root),r.root=r.root.get()[0],r.root.parentDir=void 0,r}class j extends Error{}class U extends Error{}class K extends Error{}class M extends Error{}class I extends Error{}class F{constructor(e,t,r){x(this,"name");x(this,"parentDir");x(this,"contents");x(this,"type","file");if(this.name=e,typeof t=="string"){if(t.split("").map(n=>n.charCodeAt(0)).some(n=>n>255))throw new I;t=new Uint8Array(t.split("").map(n=>n.charCodeAt(0)))}if(t.length>255)throw new M;this.contents=t||new Uint8Array,this.parentDir=r}delete(){if(this.parentDir)this.parentDir.delete(this.name);else throw new U("No parent provided when creating file")}rename(e){if(!this.parentDir)throw new U("No parent provided, or root directory");this.parentDir.rename(this.name,e)}write(e){if(e.length>255)throw new M;if(typeof e=="string"&&e.split("").map(t=>t.charCodeAt(0)).some(t=>t>255))throw new I;this.contents=typeof e=="string"?new Uint8Array(e.split("").map(t=>t.charCodeAt(0))):e}read(){return new TextDecoder().decode(this.contents)}serialize(){return F.serialize(this)}static serialize(e){const t=e.name.length,r=e.name.split("").map(n=>n.charCodeAt(0));return new Uint8Array([1].concat([t]).concat(r).concat([e.contents.byteLength]).concat(Array.from(e.contents)))}}class D{constructor(e,t){x(this,"name");x(this,"contents");x(this,"parentDir");x(this,"type","directory");this.name=e,this.parentDir=t,this.contents=[]}delete(e){const t=this.contents.filter(r=>r.name!=e);if(t===this.contents)throw new j;this.contents=t}deleteSelf(){if(!this.parentDir)throw new U("No parent provided, or root directory");this.parentDir.delete(this.name)}rename(e,t){const r=this.get(e);if(!r)throw new j("Could not find resource to rename");r.name=t}renameSelf(e){if(!this.parentDir)throw new U("No parent provided, or root directory");this.parentDir.rename(this.name,e)}addFile(e,t=!0){if(this.contents.map(r=>r.name).includes(e.name))throw new K("Cannot add file, as it already exists");return t&&(e.parentDir=this),this.contents.push(e),e}createFile(e,t){const r=new F(e,t,this);return this.addFile(r),r}createDirectory(e){const t=new D(e,this);return this.contents.push(t),t}get(e,t){if(!e)return this.contents;const r=this.contents.find(n=>n.name==e);if(!r)return null;if(t){if(r.type=="file"&&t=="file"||r.type=="directory"&&t=="directory")return r;throw new TypeError("Predefined type does not match resource type")}return r}serialize(){return D.serialize(this)}static serialize(e){const t=[2],r=e.name.length;t.push(r);const n=e.name.split("").map(a=>a.charCodeAt(0));t.push(...n);const d=[];e.contents.forEach(a=>{const o=a.serialize();d.push(...o)});const l=d.length;if(l<255)t.push(0,l);else{const a=l.toString(16),o=parseInt(a.slice(0,2),16),f=parseInt(a.slice(2),16);t.push(o,f)}return t.push(...d),new Uint8Array(t)}}function C(s){if(typeof s!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(s))}function G(s,e){for(var t="",r=0,n=-1,d=0,l,a=0;a<=s.length;++a){if(a<s.length)l=s.charCodeAt(a);else{if(l===47)break;l=47}if(l===47){if(!(n===a-1||d===1))if(n!==a-1&&d===2){if(t.length<2||r!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var o=t.lastIndexOf("/");if(o!==t.length-1){o===-1?(t="",r=0):(t=t.slice(0,o),r=t.length-1-t.lastIndexOf("/")),n=a,d=0;continue}}else if(t.length===2||t.length===1){t="",r=0,n=a,d=0;continue}}e&&(t.length>0?t+="/..":t="..",r=2)}else t.length>0?t+="/"+s.slice(n+1,a):t=s.slice(n+1,a),r=a-n-1;n=a,d=0}else l===46&&d!==-1?++d:d=-1}return t}function X(s,e){var t=e.dir||e.root,r=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+r:t+s+r:r}var B={resolve:function(){for(var e="",t=!1,r,n=arguments.length-1;n>=-1&&!t;n--){var d;n>=0?d=arguments[n]:(r===void 0&&(r=process.cwd()),d=r),C(d),d.length!==0&&(e=d+"/"+e,t=d.charCodeAt(0)===47)}return e=G(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(C(e),e.length===0)return".";var t=e.charCodeAt(0)===47,r=e.charCodeAt(e.length-1)===47;return e=G(e,!t),e.length===0&&!t&&(e="."),e.length>0&&r&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return C(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var r=arguments[t];C(r),r.length>0&&(e===void 0?e=r:e+="/"+r)}return e===void 0?".":B.normalize(e)},relative:function(e,t){if(C(e),C(t),e===t||(e=B.resolve(e),t=B.resolve(t),e===t))return"";for(var r=1;r<e.length&&e.charCodeAt(r)===47;++r);for(var n=e.length,d=n-r,l=1;l<t.length&&t.charCodeAt(l)===47;++l);for(var a=t.length,o=a-l,f=d<o?d:o,c=-1,i=0;i<=f;++i){if(i===f){if(o>f){if(t.charCodeAt(l+i)===47)return t.slice(l+i+1);if(i===0)return t.slice(l+i)}else d>f&&(e.charCodeAt(r+i)===47?c=i:i===0&&(c=0));break}var h=e.charCodeAt(r+i),g=t.charCodeAt(l+i);if(h!==g)break;h===47&&(c=i)}var b="";for(i=r+c+1;i<=n;++i)(i===n||e.charCodeAt(i)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+t.slice(l+c):(l+=c,t.charCodeAt(l)===47&&++l,t.slice(l))},_makeLong:function(e){return e},dirname:function(e){if(C(e),e.length===0)return".";for(var t=e.charCodeAt(0),r=t===47,n=-1,d=!0,l=e.length-1;l>=1;--l)if(t=e.charCodeAt(l),t===47){if(!d){n=l;break}}else d=!1;return n===-1?r?"/":".":r&&n===1?"//":e.slice(0,n)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');C(e);var r=0,n=-1,d=!0,l;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,o=-1;for(l=e.length-1;l>=0;--l){var f=e.charCodeAt(l);if(f===47){if(!d){r=l+1;break}}else o===-1&&(d=!1,o=l+1),a>=0&&(f===t.charCodeAt(a)?--a===-1&&(n=l):(a=-1,n=o))}return r===n?n=o:n===-1&&(n=e.length),e.slice(r,n)}else{for(l=e.length-1;l>=0;--l)if(e.charCodeAt(l)===47){if(!d){r=l+1;break}}else n===-1&&(d=!1,n=l+1);return n===-1?"":e.slice(r,n)}},extname:function(e){C(e);for(var t=-1,r=0,n=-1,d=!0,l=0,a=e.length-1;a>=0;--a){var o=e.charCodeAt(a);if(o===47){if(!d){r=a+1;break}continue}n===-1&&(d=!1,n=a+1),o===46?t===-1?t=a:l!==1&&(l=1):t!==-1&&(l=-1)}return t===-1||n===-1||l===0||l===1&&t===n-1&&t===r+1?"":e.slice(t,n)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return X("/",e)},parse:function(e){C(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var r=e.charCodeAt(0),n=r===47,d;n?(t.root="/",d=1):d=0;for(var l=-1,a=0,o=-1,f=!0,c=e.length-1,i=0;c>=d;--c){if(r=e.charCodeAt(c),r===47){if(!f){a=c+1;break}continue}o===-1&&(f=!1,o=c+1),r===46?l===-1?l=c:i!==1&&(i=1):l!==-1&&(i=-1)}return l===-1||o===-1||i===0||i===1&&l===o-1&&l===a+1?o!==-1&&(a===0&&n?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(a,o)):(a===0&&n?(t.name=e.slice(1,l),t.base=e.slice(1,o)):(t.name=e.slice(a,l),t.base=e.slice(a,o)),t.ext=e.slice(l,o)),a>0?t.dir=e.slice(0,a-1):n&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};B.posix=B;var Z=B;const z=Q(Z);class T{constructor(e){x(this,"root");x(this,"cwd_path");(typeof e=="string"||e instanceof Uint8Array)&&(e=H(e).root),this.root=e||new D(""),this.cwd_path="/"}cd(e){let t=this.cwd_path;e.forEach(n=>t=z.join(t,n));const r=this.get_by_path(t);return!r||r.type=="file"?!1:(this.cwd_path=t,!0)}cwd(){return this.get_by_path(this.cwd_path)}get_by_path(e){let t=this.root;const r=z.normalize(e).split(z.sep).toSpliced(0,1);if(JSON.stringify(r)==JSON.stringify([""]))return this.root;for(let n=0;n<r.length;n++){const d=r[n],l=t.get(d);if(!l)return null;if(l.type=="file")return l;t=l}return t}serialize(e=!0){const t=this.root.serialize().join(",");return e?q.compress(t):new Uint8Array(t.split(",").map(r=>parseInt(r)))}}function W(s,e){const t=window.Prism;s.classList.add("code-editor");const r=document.createElement("pre");s.appendChild(r);const n=document.createElement("textarea");n.spellcheck=!1,s.appendChild(n),n.addEventListener("input",()=>{const c=n.value,i=s.parentElement.dataset.filetype;if(i=="text"){r.innerHTML=c,r.style.color="black";return}else r.style.color="darkred";if(!c){r.innerHTML="";return}const h=t.highlight(c,t.languages[i],i);r.innerHTML=h,n.value.at(-1)==`
`&&(r.innerHTML+="<br>")}),n.addEventListener("scroll",()=>{r.scrollTop=n.scrollTop,r.scrollLeft=n.scrollLeft});const d={"{":"}","(":")","[":"]","'":"'",'"':'"',"`":"`"};function l(c,i=0){const h=n.value,g=n.selectionStart,b=h.slice(0,g)+c+h.slice(g);n.value=b,n.selectionStart=g+i,n.selectionEnd=g+i}function a(c=0){const i=n.selectionStart+c-1;return n.value.at(i)}function o(){const c=n.value.slice(0,n.selectionStart).split(`
`).pop();let i=0;for(let h=0;h<c.length&&c.at(h)==" ";h++)i++;return i}let f=0;n.addEventListener("keydown",c=>{if(c.ctrlKey&&c.key=="s"){c.preventDefault(),e.click();return}if(!["Ctrl","Shift","Alt","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(c.key)&&n.selectionStart==n.selectionEnd){if(f=o(),e.disabled=!1,c.key=="Tab"&&(c.preventDefault(),l("  ",2)),Object.keys(d).includes(c.key)&&(c.preventDefault(),Object.keys(d).indexOf(c.key)<3?l(c.key,1):l(c.key),l(d[c.key])),Object.values(d).includes(c.key)&&a(1)==c.key&&(c.preventDefault(),n.selectionStart++,n.selectionEnd=n.selectionStart),c.key=="Enter"){const i=a(),h=a(1);Object.keys(d).includes(i)?Object.entries(d).find(g=>g[0]==i)[1]==h&&(c.preventDefault(),f+=2,l(`
${" ".repeat(f)}
${" ".repeat(f-2)}`,1+f)):(c.preventDefault(),l(`
`+" ".repeat(f),f+1))}if(c.key=="Backspace"&&a()==" "&&a(-1)==" "){c.preventDefault();const i=n.selectionStart,h=n.value.slice(0,i-2)+n.value.slice(i);n.value=h,n.selectionStart=i-2,n.selectionEnd=n.selectionStart}n.dispatchEvent(new Event("input"))}})}let S=new T;function V(){const s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUNJREFUOE+V0j8sn1EUxvGPv6mBUSeJXWM1kZKIJraGVqdKDJI2HUxsGhOThYiNSagY0RqaMJnpLKmJkQiC/Lwnub+kuSl53eXNOe9zv / fe5zw1 / r + 6sI6W9PsCH3GYy2tSI75tqE / 1Mjaxl + p + DGE81fc4RaUK2MG7J27zVHsbgwFoxO0LN4e8glcBqMVKFC + EXBXPGKs + Ifa + R11JyAO2Qvsv4AytuMRJIejE36QJg4 + Km7ajGed4nQOO0YGf6UlrmEs3msQnjGIAf4opvckBv / EWu1hFAGYTYCoBPqdphbYvB0RwPpQEhHYkByzga0lAaL / lgOmi8b0kILQzOeALFksCQruUA4axgTAoghVGzicTJ4rRhoExhd7k1Y8c0F04u58ielOMsAl3CdCA65TWyE4PDnJARPkXAvTcikMiC3GIR2AJShmfkBrbAAAAAElFTkSuQmCC",e=document.createElement("img");return e.src=s,e.style.width="16px",e.style.height="16px",e}function $(s){const e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAA7AAAAOwBeShxvQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAEISURBVFiF7dbBKoRRGMbxn/kmxGIWCo2JJZfhMtyAW7A1WxYWlJUVytI1cCGszBRFFhgpY/F+k6EhizlfqfOvs3k79Txv39d5HjKZdJzjFrvYRgcXVRo4wDP65XnFUZUGYAk9vGO1avEBN2L7kUxgCm1soJHAQAM1PAzNHnGGdoEdbGEGbwkMTItFe0OzOayL5XXxhGYCcUZ/gmap2SH+0OtE4j8ZUGr2awmF/0Q2kA1kA9lATTzF8yI6q6KFBXTrOBFhdCXe53EzSMP7odksJrFf4BIFVkRyjZtRaXiHQ1EDkvNrIUlNy2clW6tafA8vvpbS0++X6gkNLIsadiza8SYWE+pl/ikf0sI3bxgBTbAAAAAASUVORK5CYII=",t=document.createElement("img");t.src=e;const r=document.createElement("button");return r.appendChild(t),r.addEventListener("click",n=>s(n)),r}function J(s,e,t=!0){const r=document.createElement("div");r.classList.add("fl-ctr");const n=document.createElement("button");if(n.textContent=s.name,s.type=="directory"?(n.classList.add("fl-btn-d"),n.addEventListener("click",()=>{S.cd([s.name]),_()}),document.getElementById("texteditor").hidden=!0):(n.classList.add("fl-btn-f"),n.addEventListener("click",()=>{const d=document.getElementById("texteditor");d.dataset.editing=S.cwd_path+"/"+s.name,d.dataset.filetype={js:"javascript",html:"html",css:"css",json:"json",txt:"text",md:"markdown",py:"python",ts:"typescript"}[s.name.split(".").pop()]||"text",d.querySelector("header").innerText=s.name,d.querySelector("textarea").value=s.read(),d.hidden=!1,document.querySelector("div#editor>textarea")&&document.querySelector("div#editor>textarea").dispatchEvent(new Event("input"))})),r.appendChild(n),t){const d=document.createElement("button");d.classList.add("fl-del"),d.appendChild(V()),d.addEventListener("click",()=>{e.cwd().delete(s.name),_()});const l=$(()=>{const o=prompt("new resource name:",s.name);e.cwd().rename(s.name,o),_()});l.classList.add("fl-rn");const a=document.createElement("div");a.appendChild(l),a.appendChild(d),a.classList.add("fl-edit-buttons"),r.appendChild(a)}return r}function ee(){const s=S.root;s.createFile("file1.txt","This is the first file."),s.createFile("file2.txt","This is the second file.");const e=s.createDirectory("directory");e.createFile("file3.txt","This is the third file."),e.createFile("file4.txt","This is the fourth file."),e.createDirectory("emptydir")}function _(){document.getElementById("cwd-display").innerText=S.cwd_path,S.cwd_path!="/"&&(document.getElementById("cwd-display").innerText+="/");const s=S.cwd().get(),e=document.getElementById("dir-listing");for(;e.firstChild;)e.removeChild(e.firstChild);if(S.cwd_path!="/"){const r=J({name:"..",type:"directory"},S,!1);r.style.backgroundColor="lightcyan",e.appendChild(r)}s.forEach(t=>{const r=J(t,S);e.appendChild(r)})}ee();_();window.onload=()=>{(()=>{const e=document.querySelector("#texteditor").querySelector("section>button:first-child");e.addEventListener("click",()=>{const t=document.getElementById("texteditor").dataset.editing;e.disabled=!0,S.get_by_path(t).write(document.querySelector("textarea").value)})})(),(()=>{const s=document.querySelector("#new-file-btn"),e=document.querySelector("#new-dir-btn");s.addEventListener("click",()=>{const t=prompt("Enter file name");if(t){if(S.cwd().get().some(r=>r.name==t)){alert("File already exists");return}S.cwd().createFile(t,""),_()}}),e.addEventListener("click",()=>{const t=prompt("Enter directory name");if(t){if(S.cwd().get().some(r=>r.name==t)){alert("Directory already exists");return}S.cwd().createDirectory(t),_()}})})(),document.getElementById("save-btn").addEventListener("click",()=>{const s=S.serialize(),e=new Blob([s],{type:"application/octet-stream"}),t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="filesystem",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)}),document.getElementById("load-btn").addEventListener("click",()=>{const s=document.createElement("input");s.type="file",s.accept="*",s.style.display="none",s.click(),s.addEventListener("change",()=>{const e=s.files[0];if(s.remove(),!e)return;const t=new FileReader;t.onload=r=>{S=new T(r.target.result),_()},t.readAsText(e)})}),document.getElementById("clear-btn").addEventListener("click",()=>{confirm("Are you sure?")&&(S=new T,_())}),(()=>{const s=document.querySelector("#texteditor");W(s.querySelector("div#editor"),s.querySelector("section>button:first-child"))})()};

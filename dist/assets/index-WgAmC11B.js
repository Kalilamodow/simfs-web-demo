var Z=Object.defineProperty;var J=(f,t,e)=>t in f?Z(f,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):f[t]=e;var S=(f,t,e)=>(J(f,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(i){if(i.ep)return;i.ep=!0;const d=e(i);fetch(i.href,d)}})();function H(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var O={exports:{}};O.exports;(function(f){var t=function(){var e=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",d={};function o(n,l){if(!d[n]){d[n]={};for(var u=0;u<n.length;u++)d[n][n.charAt(u)]=u}return d[n][l]}var c={compressToBase64:function(n){if(n==null)return"";var l=c._compress(n,6,function(u){return r.charAt(u)});switch(l.length%4){default:case 0:return l;case 1:return l+"===";case 2:return l+"==";case 3:return l+"="}},decompressFromBase64:function(n){return n==null?"":n==""?null:c._decompress(n.length,32,function(l){return o(r,n.charAt(l))})},compressToUTF16:function(n){return n==null?"":c._compress(n,15,function(l){return e(l+32)})+" "},decompressFromUTF16:function(n){return n==null?"":n==""?null:c._decompress(n.length,16384,function(l){return n.charCodeAt(l)-32})},compressToUint8Array:function(n){for(var l=c.compress(n),u=new Uint8Array(l.length*2),s=0,h=l.length;s<h;s++){var y=l.charCodeAt(s);u[s*2]=y>>>8,u[s*2+1]=y%256}return u},decompressFromUint8Array:function(n){if(n==null)return c.decompress(n);for(var l=new Array(n.length/2),u=0,s=l.length;u<s;u++)l[u]=n[u*2]*256+n[u*2+1];var h=[];return l.forEach(function(y){h.push(e(y))}),c.decompress(h.join(""))},compressToEncodedURIComponent:function(n){return n==null?"":c._compress(n,6,function(l){return i.charAt(l)})},decompressFromEncodedURIComponent:function(n){return n==null?"":n==""?null:(n=n.replace(/ /g,"+"),c._decompress(n.length,32,function(l){return o(i,n.charAt(l))}))},compress:function(n){return c._compress(n,16,function(l){return e(l)})},_compress:function(n,l,u){if(n==null)return"";var s,h,y={},_={},E="",C="",w="",b=2,A=3,g=2,v=[],a=0,m=0,p;for(p=0;p<n.length;p+=1)if(E=n.charAt(p),Object.prototype.hasOwnProperty.call(y,E)||(y[E]=A++,_[E]=!0),C=w+E,Object.prototype.hasOwnProperty.call(y,C))w=C;else{if(Object.prototype.hasOwnProperty.call(_,w)){if(w.charCodeAt(0)<256){for(s=0;s<g;s++)a=a<<1,m==l-1?(m=0,v.push(u(a)),a=0):m++;for(h=w.charCodeAt(0),s=0;s<8;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1}else{for(h=1,s=0;s<g;s++)a=a<<1|h,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=0;for(h=w.charCodeAt(0),s=0;s<16;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1}b--,b==0&&(b=Math.pow(2,g),g++),delete _[w]}else for(h=y[w],s=0;s<g;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1;b--,b==0&&(b=Math.pow(2,g),g++),y[C]=A++,w=String(E)}if(w!==""){if(Object.prototype.hasOwnProperty.call(_,w)){if(w.charCodeAt(0)<256){for(s=0;s<g;s++)a=a<<1,m==l-1?(m=0,v.push(u(a)),a=0):m++;for(h=w.charCodeAt(0),s=0;s<8;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1}else{for(h=1,s=0;s<g;s++)a=a<<1|h,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=0;for(h=w.charCodeAt(0),s=0;s<16;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1}b--,b==0&&(b=Math.pow(2,g),g++),delete _[w]}else for(h=y[w],s=0;s<g;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1;b--,b==0&&(b=Math.pow(2,g),g++)}for(h=2,s=0;s<g;s++)a=a<<1|h&1,m==l-1?(m=0,v.push(u(a)),a=0):m++,h=h>>1;for(;;)if(a=a<<1,m==l-1){v.push(u(a));break}else m++;return v.join("")},decompress:function(n){return n==null?"":n==""?null:c._decompress(n.length,32768,function(l){return n.charCodeAt(l)})},_decompress:function(n,l,u){var s=[],h=4,y=4,_=3,E="",C=[],w,b,A,g,v,a,m,p={val:u(0),position:l,index:1};for(w=0;w<3;w+=1)s[w]=w;for(A=0,v=Math.pow(2,2),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;switch(A){case 0:for(A=0,v=Math.pow(2,8),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;m=e(A);break;case 1:for(A=0,v=Math.pow(2,16),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;m=e(A);break;case 2:return""}for(s[3]=m,b=m,C.push(m);;){if(p.index>n)return"";for(A=0,v=Math.pow(2,_),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;switch(m=A){case 0:for(A=0,v=Math.pow(2,8),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;s[y++]=e(A),m=y-1,h--;break;case 1:for(A=0,v=Math.pow(2,16),a=1;a!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=l,p.val=u(p.index++)),A|=(g>0?1:0)*a,a<<=1;s[y++]=e(A),m=y-1,h--;break;case 2:return C.join("")}if(h==0&&(h=Math.pow(2,_),_++),s[m])E=s[m];else if(m===y)E=b+b.charAt(0);else return null;C.push(E),s[y++]=b+E.charAt(0),h--,b=E,h==0&&(h=Math.pow(2,_),_++)}}};return c}();f!=null?f.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(O);var q=O.exports;const z=f=>Array.from(f).map(t=>String.fromCharCode(t)).join("");function I(f,t){const e=Array.from(f);e.shift();const r=e.shift(),i=z(e.splice(0,r)),d=t.createDirectory(i),o=(()=>{const c=e.shift(),n=e.shift(),l=c.toString(16)+n.toString(16);return parseInt(l,16)})();for(let c=0;c<o;c++){const n=e[c];if(n==1){const l=e[c+1],u=z(e.slice(c+2,c+2+l)),s=e[c+2+l],h=z(e.slice(c+3+l,c+3+l+s));d.createFile(u,h);const y=3+l+s;c+=y,c--}if(n==2){const l=I(new Uint8Array(e.splice(c)),d);c+=l,c--}}return o}function N(f){const e=typeof f=="string"?q.decompress(f).split(",").map(i=>parseInt(i)):f,r=new T;return I(new Uint8Array(e),r.root),r.root=r.root.get()[0],r.root.parentDir=void 0,r}class K extends Error{}class P extends Error{}class W extends Error{}class R extends Error{}class j extends Error{}class M{constructor(t,e,r){S(this,"name");S(this,"parentDir");S(this,"contents");S(this,"type","file");if(this.name=t,typeof e=="string"){if(e.split("").map(i=>i.charCodeAt(0)).some(i=>i>255))throw new j;e=new Uint8Array(e.split("").map(i=>i.charCodeAt(0)))}if(e.length>255)throw new R;this.contents=e||new Uint8Array,this.parentDir=r}delete(){if(this.parentDir)this.parentDir.delete(this.name);else throw new P("No parent provided when creating file")}write(t){if(t.length>255)throw new R;if(typeof t=="string"&&t.split("").map(e=>e.charCodeAt(0)).some(e=>e>255))throw new j;this.contents=typeof t=="string"?new Uint8Array(t.split("").map(e=>e.charCodeAt(0))):t}read(){return new TextDecoder().decode(this.contents)}serialize(){return M.serialize(this)}static serialize(t){const e=t.name.length,r=t.name.split("").map(i=>i.charCodeAt(0));return new Uint8Array([1].concat([e]).concat(r).concat([t.contents.byteLength]).concat(Array.from(t.contents)))}}class B{constructor(t,e){S(this,"name");S(this,"contents");S(this,"parentDir");S(this,"type","directory");this.name=t,this.parentDir=e,this.contents=[]}delete(t){const e=this.contents.filter(r=>r.name!=t);if(e===this.contents)throw new K;this.contents=e}deleteSelf(){if(!this.parentDir)throw new P("No parent provided, or root directory");this.parentDir.delete(this.name)}addFile(t,e=!0){if(this.contents.map(r=>r.name).includes(t.name))throw new W("Cannot add file, as it already exists");return e&&(t.parentDir=this),this.contents.push(t),t}createFile(t,e){const r=new M(t,e,this);return this.addFile(r),r}createDirectory(t){const e=new B(t,this);return this.contents.push(e),e}get(t,e){if(!t)return this.contents;const r=this.contents.find(i=>i.name==t);if(!r)return null;if(e){if(r.type=="file"&&e=="file"||r.type=="directory"&&e=="directory")return r;throw new TypeError("Predefined type does not match resource type")}return r}serialize(){return B.serialize(this)}static serialize(t){const e=[2],r=t.name.length;e.push(r);const i=t.name.split("").map(c=>c.charCodeAt(0));e.push(...i);const d=[];t.contents.forEach(c=>{const n=c.serialize();d.push(...n)});const o=d.length;if(o<255)e.push(0,o);else{const c=o.toString(16),n=parseInt(c.slice(0,2),16),l=parseInt(c.slice(2),16);e.push(n,l)}return e.push(...d),new Uint8Array(e)}}function L(f){if(typeof f!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(f))}function F(f,t){for(var e="",r=0,i=-1,d=0,o,c=0;c<=f.length;++c){if(c<f.length)o=f.charCodeAt(c);else{if(o===47)break;o=47}if(o===47){if(!(i===c-1||d===1))if(i!==c-1&&d===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var n=e.lastIndexOf("/");if(n!==e.length-1){n===-1?(e="",r=0):(e=e.slice(0,n),r=e.length-1-e.lastIndexOf("/")),i=c,d=0;continue}}else if(e.length===2||e.length===1){e="",r=0,i=c,d=0;continue}}t&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+f.slice(i+1,c):e=f.slice(i+1,c),r=c-i-1;i=c,d=0}else o===46&&d!==-1?++d:d=-1}return e}function G(f,t){var e=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+r:e+f+r:r}var D={resolve:function(){for(var t="",e=!1,r,i=arguments.length-1;i>=-1&&!e;i--){var d;i>=0?d=arguments[i]:(r===void 0&&(r=process.cwd()),d=r),L(d),d.length!==0&&(t=d+"/"+t,e=d.charCodeAt(0)===47)}return t=F(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(L(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=F(t,!e),t.length===0&&!e&&(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return L(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];L(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":D.normalize(t)},relative:function(t,e){if(L(t),L(e),t===e||(t=D.resolve(t),e=D.resolve(e),t===e))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var i=t.length,d=i-r,o=1;o<e.length&&e.charCodeAt(o)===47;++o);for(var c=e.length,n=c-o,l=d<n?d:n,u=-1,s=0;s<=l;++s){if(s===l){if(n>l){if(e.charCodeAt(o+s)===47)return e.slice(o+s+1);if(s===0)return e.slice(o+s)}else d>l&&(t.charCodeAt(r+s)===47?u=s:s===0&&(u=0));break}var h=t.charCodeAt(r+s),y=e.charCodeAt(o+s);if(h!==y)break;h===47&&(u=s)}var _="";for(s=r+u+1;s<=i;++s)(s===i||t.charCodeAt(s)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+e.slice(o+u):(o+=u,e.charCodeAt(o)===47&&++o,e.slice(o))},_makeLong:function(t){return t},dirname:function(t){if(L(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,i=-1,d=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),e===47){if(!d){i=o;break}}else d=!1;return i===-1?r?"/":".":r&&i===1?"//":t.slice(0,i)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');L(t);var r=0,i=-1,d=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var c=e.length-1,n=-1;for(o=t.length-1;o>=0;--o){var l=t.charCodeAt(o);if(l===47){if(!d){r=o+1;break}}else n===-1&&(d=!1,n=o+1),c>=0&&(l===e.charCodeAt(c)?--c===-1&&(i=o):(c=-1,i=n))}return r===i?i=n:i===-1&&(i=t.length),t.slice(r,i)}else{for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===47){if(!d){r=o+1;break}}else i===-1&&(d=!1,i=o+1);return i===-1?"":t.slice(r,i)}},extname:function(t){L(t);for(var e=-1,r=0,i=-1,d=!0,o=0,c=t.length-1;c>=0;--c){var n=t.charCodeAt(c);if(n===47){if(!d){r=c+1;break}continue}i===-1&&(d=!1,i=c+1),n===46?e===-1?e=c:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||i===-1||o===0||o===1&&e===i-1&&e===r+1?"":t.slice(e,i)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return G("/",t)},parse:function(t){L(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r=t.charCodeAt(0),i=r===47,d;i?(e.root="/",d=1):d=0;for(var o=-1,c=0,n=-1,l=!0,u=t.length-1,s=0;u>=d;--u){if(r=t.charCodeAt(u),r===47){if(!l){c=u+1;break}continue}n===-1&&(l=!1,n=u+1),r===46?o===-1?o=u:s!==1&&(s=1):o!==-1&&(s=-1)}return o===-1||n===-1||s===0||s===1&&o===n-1&&o===c+1?n!==-1&&(c===0&&i?e.base=e.name=t.slice(1,n):e.base=e.name=t.slice(c,n)):(c===0&&i?(e.name=t.slice(1,o),e.base=t.slice(1,n)):(e.name=t.slice(c,o),e.base=t.slice(c,n)),e.ext=t.slice(o,n)),c>0?e.dir=t.slice(0,c-1):i&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};D.posix=D;var Q=D;const U=H(Q);class T{constructor(t){S(this,"root");S(this,"cwd_path");typeof t=="string"&&(t=N(t).root),this.root=t||new B(""),this.cwd_path="/"}cd(t){let e=this.cwd_path;t.forEach(i=>e=U.join(e,i));const r=this.get_by_path(e);return!r||r.type=="file"?!1:(this.cwd_path=e,!0)}cwd(){return this.get_by_path(this.cwd_path)}get_by_path(t){let e=this.root;const r=U.normalize(t).split(U.sep).toSpliced(0,1);if(JSON.stringify(r)==JSON.stringify([""]))return this.root;for(let i=0;i<r.length;i++){const d=r[i],o=e.get(d);if(!o)return null;if(o.type=="file")return o;e=o}return e}serialize(t=!0){const e=this.root.serialize().join(",");return t?q.compress(e):new Uint8Array(e.split(",").map(r=>parseInt(r)))}}let x=new T;function X(){const f=x.root;f.createFile("file1.txt","This is the first file."),f.createFile("file2.txt","This is the second file.");const t=f.createDirectory("directory");t.createFile("file3.txt","This is the third file."),t.createFile("file4.txt","This is the fourth file."),t.createDirectory("emptydir")}function k(){document.getElementById("cwd-display").innerText=x.cwd_path,x.cwd_path!="/"&&(document.getElementById("cwd-display").innerText+="/");const f=x.cwd().get(),t=document.getElementById("dir-listing");for(;t.firstChild;)t.removeChild(t.firstChild);if(x.cwd_path!="/"){const e=document.createElement("button");e.classList.add("fl-btn"),e.textContent="up",e.style.color="purple",e.addEventListener("click",()=>{x.cd([".."]),k()}),t.appendChild(e)}f.forEach(e=>{const r=document.createElement("button");r.classList.add("fl-btn");const i=document.createElement("span");i.textContent=e.name,r.appendChild(i),e.type=="directory"?(r.classList.add("fl-d"),r.addEventListener("click",()=>{x.cd([e.name]),k()}),document.getElementById("texteditor").hidden=!0):(r.classList.add("fl-f"),r.addEventListener("click",()=>{const o=document.getElementById("texteditor");o.dataset.editing=x.cwd_path+"/"+e.name,o.querySelector("header").innerText=e.name,o.querySelector("textarea").value=e.read(),o.hidden=!1}));const d=document.createElement("button");d.innerHTML="delete",d.addEventListener("click",()=>{x.cwd().delete(e.name),k(),document.getElementById("texteditor").hidden=!0}),r.innerHTML+="&emsp;",r.appendChild(d),t.appendChild(r)})}X();k();window.onload=()=>{document.querySelector("#texteditor>button").addEventListener("click",()=>{const t=document.getElementById("texteditor").dataset.editing;x.get_by_path(t).write(document.querySelector("textarea").value)}),(()=>{const f=document.querySelector("#new-file-btn"),t=document.querySelector("#new-dir-btn");f.addEventListener("click",()=>{const e=prompt("Enter file name");if(e){if(x.cwd().get().some(r=>r.name==e)){alert("File already exists");return}x.cwd().createFile(e,""),k()}}),t.addEventListener("click",()=>{const e=prompt("Enter directory name");if(e){if(x.cwd().get().some(r=>r.name==e)){alert("Directory already exists");return}x.cwd().createDirectory(e),k()}})})(),document.getElementById("save-btn").addEventListener("click",()=>{const f=x.serialize(),t=new Blob([f],{type:"application/octet-stream"}),e=URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download="filesystem",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}),document.getElementById("load-btn").addEventListener("click",()=>{const f=document.createElement("input");f.type="file",f.accept="*",f.style.display="none",f.click(),f.addEventListener("change",()=>{const t=f.files[0];if(f.remove(),!t)return;const e=new FileReader;e.onload=r=>{x=new T(r.target.result),k()},e.readAsText(t)})}),document.getElementById("clear-btn").addEventListener("click",()=>{confirm("Are you sure?")&&(x=new T,k())})};

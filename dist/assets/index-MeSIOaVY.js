var P=Object.defineProperty;var Q=(o,t,e)=>t in o?P(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var S=(o,t,e)=>(Q(o,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function e(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(n){if(n.ep)return;n.ep=!0;const c=e(n);fetch(n.href,c)}})();function Y(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var z={exports:{}};z.exports;(function(o){var t=function(){var e=String.fromCharCode,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",c={};function l(i,f){if(!c[i]){c[i]={};for(var u=0;u<i.length;u++)c[i][i.charAt(u)]=u}return c[i][f]}var a={compressToBase64:function(i){if(i==null)return"";var f=a._compress(i,6,function(u){return r.charAt(u)});switch(f.length%4){default:case 0:return f;case 1:return f+"===";case 2:return f+"==";case 3:return f+"="}},decompressFromBase64:function(i){return i==null?"":i==""?null:a._decompress(i.length,32,function(f){return l(r,i.charAt(f))})},compressToUTF16:function(i){return i==null?"":a._compress(i,15,function(f){return e(f+32)})+" "},decompressFromUTF16:function(i){return i==null?"":i==""?null:a._decompress(i.length,16384,function(f){return i.charCodeAt(f)-32})},compressToUint8Array:function(i){for(var f=a.compress(i),u=new Uint8Array(f.length*2),s=0,h=f.length;s<h;s++){var y=f.charCodeAt(s);u[s*2]=y>>>8,u[s*2+1]=y%256}return u},decompressFromUint8Array:function(i){if(i==null)return a.decompress(i);for(var f=new Array(i.length/2),u=0,s=f.length;u<s;u++)f[u]=i[u*2]*256+i[u*2+1];var h=[];return f.forEach(function(y){h.push(e(y))}),a.decompress(h.join(""))},compressToEncodedURIComponent:function(i){return i==null?"":a._compress(i,6,function(f){return n.charAt(f)})},decompressFromEncodedURIComponent:function(i){return i==null?"":i==""?null:(i=i.replace(/ /g,"+"),a._decompress(i.length,32,function(f){return l(n,i.charAt(f))}))},compress:function(i){return a._compress(i,16,function(f){return e(f)})},_compress:function(i,f,u){if(i==null)return"";var s,h,y={},b={},_="",C="",w="",E=2,A=3,g=2,v=[],d=0,m=0,p;for(p=0;p<i.length;p+=1)if(_=i.charAt(p),Object.prototype.hasOwnProperty.call(y,_)||(y[_]=A++,b[_]=!0),C=w+_,Object.prototype.hasOwnProperty.call(y,C))w=C;else{if(Object.prototype.hasOwnProperty.call(b,w)){if(w.charCodeAt(0)<256){for(s=0;s<g;s++)d=d<<1,m==f-1?(m=0,v.push(u(d)),d=0):m++;for(h=w.charCodeAt(0),s=0;s<8;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1}else{for(h=1,s=0;s<g;s++)d=d<<1|h,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=0;for(h=w.charCodeAt(0),s=0;s<16;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1}E--,E==0&&(E=Math.pow(2,g),g++),delete b[w]}else for(h=y[w],s=0;s<g;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1;E--,E==0&&(E=Math.pow(2,g),g++),y[C]=A++,w=String(_)}if(w!==""){if(Object.prototype.hasOwnProperty.call(b,w)){if(w.charCodeAt(0)<256){for(s=0;s<g;s++)d=d<<1,m==f-1?(m=0,v.push(u(d)),d=0):m++;for(h=w.charCodeAt(0),s=0;s<8;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1}else{for(h=1,s=0;s<g;s++)d=d<<1|h,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=0;for(h=w.charCodeAt(0),s=0;s<16;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1}E--,E==0&&(E=Math.pow(2,g),g++),delete b[w]}else for(h=y[w],s=0;s<g;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1;E--,E==0&&(E=Math.pow(2,g),g++)}for(h=2,s=0;s<g;s++)d=d<<1|h&1,m==f-1?(m=0,v.push(u(d)),d=0):m++,h=h>>1;for(;;)if(d=d<<1,m==f-1){v.push(u(d));break}else m++;return v.join("")},decompress:function(i){return i==null?"":i==""?null:a._decompress(i.length,32768,function(f){return i.charCodeAt(f)})},_decompress:function(i,f,u){var s=[],h=4,y=4,b=3,_="",C=[],w,E,A,g,v,d,m,p={val:u(0),position:f,index:1};for(w=0;w<3;w+=1)s[w]=w;for(A=0,v=Math.pow(2,2),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;switch(A){case 0:for(A=0,v=Math.pow(2,8),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;m=e(A);break;case 1:for(A=0,v=Math.pow(2,16),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;m=e(A);break;case 2:return""}for(s[3]=m,E=m,C.push(m);;){if(p.index>i)return"";for(A=0,v=Math.pow(2,b),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;switch(m=A){case 0:for(A=0,v=Math.pow(2,8),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;s[y++]=e(A),m=y-1,h--;break;case 1:for(A=0,v=Math.pow(2,16),d=1;d!=v;)g=p.val&p.position,p.position>>=1,p.position==0&&(p.position=f,p.val=u(p.index++)),A|=(g>0?1:0)*d,d<<=1;s[y++]=e(A),m=y-1,h--;break;case 2:return C.join("")}if(h==0&&(h=Math.pow(2,b),b++),s[m])_=s[m];else if(m===y)_=E+E.charAt(0);else return null;C.push(_),s[y++]=E+_.charAt(0),h--,E=_,h==0&&(h=Math.pow(2,b),b++)}}};return a}();o!=null?o.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})})(z);var J=z.exports;const D=o=>Array.from(o).map(t=>String.fromCharCode(t)).join("");function q(o,t){const e=Array.from(o);e.shift();const r=e.shift(),n=D(e.splice(0,r)),c=t.createDirectory(n),l=(()=>{const a=e.shift(),i=e.shift(),f=a.toString(16)+i.toString(16);return parseInt(f,16)})();for(let a=0;a<l;a++){const i=e[a];if(i==1){const f=e[a+1],u=D(e.slice(a+2,a+2+f)),s=e[a+2+f],h=D(e.slice(a+3+f,a+3+f+s));c.createFile(u,h);const y=3+f+s;a+=y,a--}if(i==2){const f=q(new Uint8Array(e.splice(a)),c);a+=f,a--}}return l}function K(o){const e=typeof o=="string"?J.decompress(o).split(",").map(n=>parseInt(n)):o,r=new U;return q(new Uint8Array(e),r.root),r.root=r.root.get()[0],r.root.parentDir=void 0,r}class N extends Error{}class G extends Error{}class H extends Error{}class R extends Error{}class j extends Error{}class M{constructor(t,e,r){S(this,"name");S(this,"parentDir");S(this,"contents");S(this,"type","file");if(this.name=t,typeof e=="string"){if(e.split("").map(n=>n.charCodeAt(0)).some(n=>n>255))throw new j;e=new Uint8Array(e.split("").map(n=>n.charCodeAt(0)))}if(e.length>255)throw new R;this.contents=e||new Uint8Array,this.parentDir=r}delete(){if(this.parentDir)this.parentDir.delete(this.name);else throw new G("No parent provided when creating file")}write(t){if(t.length>255)throw new R;if(typeof t=="string"&&t.split("").map(e=>e.charCodeAt(0)).some(e=>e>255))throw new j;this.contents=typeof t=="string"?new Uint8Array(t.split("").map(e=>e.charCodeAt(0))):t}read(){return new TextDecoder().decode(this.contents)}serialize(){return M.serialize(this)}static serialize(t){const e=t.name.length,r=t.name.split("").map(n=>n.charCodeAt(0));return new Uint8Array([1].concat([e]).concat(r).concat([t.contents.byteLength]).concat(Array.from(t.contents)))}}class T{constructor(t,e){S(this,"name");S(this,"contents");S(this,"parentDir");S(this,"type","directory");this.name=t,this.parentDir=e,this.contents=[]}delete(t){const e=this.contents.filter(r=>r.name!=t);if(e===this.contents)throw new N;this.contents=e}deleteSelf(){if(!this.parentDir)throw new G("No parent provided, or root directory");this.parentDir.delete(this.name)}addFile(t,e=!0){if(this.contents.map(r=>r.name).includes(t.name))throw new H("Cannot add file, as it already exists");return e&&(t.parentDir=this),this.contents.push(t),t}createFile(t,e){const r=new M(t,e,this);return this.addFile(r),r}createDirectory(t){const e=new T(t,this);return this.contents.push(e),e}get(t,e){if(!t)return this.contents;const r=this.contents.find(n=>n.name==t);if(!r)return null;if(e){if(r.type=="file"&&e=="file"||r.type=="directory"&&e=="directory")return r;throw new TypeError("Predefined type does not match resource type")}return r}serialize(){return T.serialize(this)}static serialize(t){const e=[2],r=t.name.length;e.push(r);const n=t.name.split("").map(a=>a.charCodeAt(0));e.push(...n);const c=[];t.contents.forEach(a=>{const i=a.serialize();c.push(...i)});const l=c.length;if(l<255)e.push(0,l);else{const a=l.toString(16),i=parseInt(a.slice(0,2),16),f=parseInt(a.slice(2),16);e.push(i,f)}return e.push(...c),new Uint8Array(e)}}function L(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function F(o,t){for(var e="",r=0,n=-1,c=0,l,a=0;a<=o.length;++a){if(a<o.length)l=o.charCodeAt(a);else{if(l===47)break;l=47}if(l===47){if(!(n===a-1||c===1))if(n!==a-1&&c===2){if(e.length<2||r!==2||e.charCodeAt(e.length-1)!==46||e.charCodeAt(e.length-2)!==46){if(e.length>2){var i=e.lastIndexOf("/");if(i!==e.length-1){i===-1?(e="",r=0):(e=e.slice(0,i),r=e.length-1-e.lastIndexOf("/")),n=a,c=0;continue}}else if(e.length===2||e.length===1){e="",r=0,n=a,c=0;continue}}t&&(e.length>0?e+="/..":e="..",r=2)}else e.length>0?e+="/"+o.slice(n+1,a):e=o.slice(n+1,a),r=a-n-1;n=a,c=0}else l===46&&c!==-1?++c:c=-1}return e}function X(o,t){var e=t.dir||t.root,r=t.base||(t.name||"")+(t.ext||"");return e?e===t.root?e+r:e+o+r:r}var B={resolve:function(){for(var t="",e=!1,r,n=arguments.length-1;n>=-1&&!e;n--){var c;n>=0?c=arguments[n]:(r===void 0&&(r=process.cwd()),c=r),L(c),c.length!==0&&(t=c+"/"+t,e=c.charCodeAt(0)===47)}return t=F(t,!e),e?t.length>0?"/"+t:"/":t.length>0?t:"."},normalize:function(t){if(L(t),t.length===0)return".";var e=t.charCodeAt(0)===47,r=t.charCodeAt(t.length-1)===47;return t=F(t,!e),t.length===0&&!e&&(t="."),t.length>0&&r&&(t+="/"),e?"/"+t:t},isAbsolute:function(t){return L(t),t.length>0&&t.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var t,e=0;e<arguments.length;++e){var r=arguments[e];L(r),r.length>0&&(t===void 0?t=r:t+="/"+r)}return t===void 0?".":B.normalize(t)},relative:function(t,e){if(L(t),L(e),t===e||(t=B.resolve(t),e=B.resolve(e),t===e))return"";for(var r=1;r<t.length&&t.charCodeAt(r)===47;++r);for(var n=t.length,c=n-r,l=1;l<e.length&&e.charCodeAt(l)===47;++l);for(var a=e.length,i=a-l,f=c<i?c:i,u=-1,s=0;s<=f;++s){if(s===f){if(i>f){if(e.charCodeAt(l+s)===47)return e.slice(l+s+1);if(s===0)return e.slice(l+s)}else c>f&&(t.charCodeAt(r+s)===47?u=s:s===0&&(u=0));break}var h=t.charCodeAt(r+s),y=e.charCodeAt(l+s);if(h!==y)break;h===47&&(u=s)}var b="";for(s=r+u+1;s<=n;++s)(s===n||t.charCodeAt(s)===47)&&(b.length===0?b+="..":b+="/..");return b.length>0?b+e.slice(l+u):(l+=u,e.charCodeAt(l)===47&&++l,e.slice(l))},_makeLong:function(t){return t},dirname:function(t){if(L(t),t.length===0)return".";for(var e=t.charCodeAt(0),r=e===47,n=-1,c=!0,l=t.length-1;l>=1;--l)if(e=t.charCodeAt(l),e===47){if(!c){n=l;break}}else c=!1;return n===-1?r?"/":".":r&&n===1?"//":t.slice(0,n)},basename:function(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');L(t);var r=0,n=-1,c=!0,l;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";var a=e.length-1,i=-1;for(l=t.length-1;l>=0;--l){var f=t.charCodeAt(l);if(f===47){if(!c){r=l+1;break}}else i===-1&&(c=!1,i=l+1),a>=0&&(f===e.charCodeAt(a)?--a===-1&&(n=l):(a=-1,n=i))}return r===n?n=i:n===-1&&(n=t.length),t.slice(r,n)}else{for(l=t.length-1;l>=0;--l)if(t.charCodeAt(l)===47){if(!c){r=l+1;break}}else n===-1&&(c=!1,n=l+1);return n===-1?"":t.slice(r,n)}},extname:function(t){L(t);for(var e=-1,r=0,n=-1,c=!0,l=0,a=t.length-1;a>=0;--a){var i=t.charCodeAt(a);if(i===47){if(!c){r=a+1;break}continue}n===-1&&(c=!1,n=a+1),i===46?e===-1?e=a:l!==1&&(l=1):e!==-1&&(l=-1)}return e===-1||n===-1||l===0||l===1&&e===n-1&&e===r+1?"":t.slice(e,n)},format:function(t){if(t===null||typeof t!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof t);return X("/",t)},parse:function(t){L(t);var e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;var r=t.charCodeAt(0),n=r===47,c;n?(e.root="/",c=1):c=0;for(var l=-1,a=0,i=-1,f=!0,u=t.length-1,s=0;u>=c;--u){if(r=t.charCodeAt(u),r===47){if(!f){a=u+1;break}continue}i===-1&&(f=!1,i=u+1),r===46?l===-1?l=u:s!==1&&(s=1):l!==-1&&(s=-1)}return l===-1||i===-1||s===0||s===1&&l===i-1&&l===a+1?i!==-1&&(a===0&&n?e.base=e.name=t.slice(1,i):e.base=e.name=t.slice(a,i)):(a===0&&n?(e.name=t.slice(1,l),e.base=t.slice(1,i)):(e.name=t.slice(a,l),e.base=t.slice(a,i)),e.ext=t.slice(l,i)),a>0?e.dir=t.slice(0,a-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};B.posix=B;var W=B;const O=Y(W);class U{constructor(t){S(this,"root");S(this,"cwd_path");typeof t=="string"&&(t=K(t).root),this.root=t||new T(""),this.cwd_path="/"}cd(t){let e=this.cwd_path;t.forEach(n=>e=O.join(e,n));const r=this.get_by_path(e);return!r||r.type=="file"?!1:(this.cwd_path=e,!0)}cwd(){return this.get_by_path(this.cwd_path)}get_by_path(t){let e=this.root;const r=O.normalize(t).split(O.sep).toSpliced(0,1);if(JSON.stringify(r)==JSON.stringify([""]))return this.root;for(let n=0;n<r.length;n++){const c=r[n],l=e.get(c);if(!l)return null;if(l.type=="file")return l;e=l}return e}serialize(t=!0){const e=this.root.serialize().join(",");return t?J.compress(e):new Uint8Array(e.split(",").map(r=>parseInt(r)))}}function Z(o){const t=window.Prism;o.classList.add("code-editor");const e=document.createElement("pre");o.appendChild(e);const r=document.createElement("textarea");r.spellcheck=!1,o.appendChild(r),r.addEventListener("input",()=>{const n=r.value,c=o.parentElement.dataset.filetype;if(c=="text"){e.innerHTML=n,e.style.color="black";return}else e.style.color="darkred";if(!n){e.innerHTML="";return}const l=t.highlight(n,t.languages[c],c);e.innerHTML=l}),r.addEventListener("scroll",()=>{e.scrollTop=r.scrollTop,e.scrollLeft=r.scrollLeft})}let x=new U;function $(){const o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAUNJREFUOE+V0j8sn1EUxvGPv6mBUSeJXWM1kZKIJraGVqdKDJI2HUxsGhOThYiNSagY0RqaMJnpLKmJkQiC/Lwnub+kuSl53eXNOe9zv / fe5zw1 / r + 6sI6W9PsCH3GYy2tSI75tqE / 1Mjaxl + p + DGE81fc4RaUK2MG7J27zVHsbgwFoxO0LN4e8glcBqMVKFC + EXBXPGKs + Ifa + R11JyAO2Qvsv4AytuMRJIejE36QJg4 + Km7ajGed4nQOO0YGf6UlrmEs3msQnjGIAf4opvckBv / EWu1hFAGYTYCoBPqdphbYvB0RwPpQEhHYkByzga0lAaL / lgOmi8b0kILQzOeALFksCQruUA4axgTAoghVGzicTJ4rRhoExhd7k1Y8c0F04u58ielOMsAl3CdCA65TWyE4PDnJARPkXAvTcikMiC3GIR2AJShmfkBrbAAAAAElFTkSuQmCC",t=document.createElement("img");return t.src=o,t.style.width="16px",t.style.height="16px",t}function I(o,t,e=!0){const r=document.createElement("div");r.classList.add("fl-ctr");const n=document.createElement("button");if(n.textContent=o.name,o.type=="directory"?(n.classList.add("fl-btn-d"),n.addEventListener("click",()=>{x.cd([o.name]),k()}),document.getElementById("texteditor").hidden=!0):(n.classList.add("fl-btn-f"),n.addEventListener("click",()=>{const c=document.getElementById("texteditor");c.dataset.editing=x.cwd_path+"/"+o.name,c.dataset.filetype={js:"javascript",html:"html",css:"css",json:"json",txt:"text",md:"markdown",py:"python",ts:"typescript"}[o.name.split(".").pop()]||"text",c.querySelector("header").innerText=o.name,c.querySelector("textarea").value=o.read(),c.hidden=!1,document.querySelector("div#editor>textarea")&&document.querySelector("div#editor>textarea").dispatchEvent(new Event("input"))})),r.appendChild(n),e){const c=document.createElement("button");c.classList.add("fl-del"),c.appendChild($()),c.addEventListener("click",()=>{t.cwd().delete(o.name),k()}),r.appendChild(c)}return r}function V(){const o=x.root;o.createFile("file1.txt","This is the first file."),o.createFile("file2.txt","This is the second file.");const t=o.createDirectory("directory");t.createFile("file3.txt","This is the third file."),t.createFile("file4.txt","This is the fourth file."),t.createDirectory("emptydir")}function k(){document.getElementById("cwd-display").innerText=x.cwd_path,x.cwd_path!="/"&&(document.getElementById("cwd-display").innerText+="/");const o=x.cwd().get(),t=document.getElementById("dir-listing");for(;t.firstChild;)t.removeChild(t.firstChild);if(x.cwd_path!="/"){const r=I({name:"..",type:"directory"},x,!1);r.style.backgroundColor="lightcyan",t.appendChild(r)}o.forEach(e=>{const r=I(e,x);t.appendChild(r)})}V();k();window.onload=()=>{document.querySelector("#texteditor>button").addEventListener("click",()=>{const t=document.getElementById("texteditor").dataset.editing;x.get_by_path(t).write(document.querySelector("textarea").value)}),(()=>{const o=document.querySelector("#new-file-btn"),t=document.querySelector("#new-dir-btn");o.addEventListener("click",()=>{const e=prompt("Enter file name");if(e){if(x.cwd().get().some(r=>r.name==e)){alert("File already exists");return}x.cwd().createFile(e,""),k()}}),t.addEventListener("click",()=>{const e=prompt("Enter directory name");if(e){if(x.cwd().get().some(r=>r.name==e)){alert("Directory already exists");return}x.cwd().createDirectory(e),k()}})})(),document.getElementById("save-btn").addEventListener("click",()=>{const o=x.serialize(),t=new Blob([o],{type:"application/octet-stream"}),e=URL.createObjectURL(t),r=document.createElement("a");r.href=e,r.download="filesystem",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(e)}),document.getElementById("load-btn").addEventListener("click",()=>{const o=document.createElement("input");o.type="file",o.accept="*",o.style.display="none",o.click(),o.addEventListener("change",()=>{const t=o.files[0];if(o.remove(),!t)return;const e=new FileReader;e.onload=r=>{x=new U(r.target.result),k()},e.readAsText(t)})}),document.getElementById("clear-btn").addEventListener("click",()=>{confirm("Are you sure?")&&(x=new U,k())}),(()=>{const o=document.querySelector("#texteditor>#editor");Z(o)})()};
